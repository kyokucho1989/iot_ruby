# 共同開発問題集
Rubyの基礎力を高めることがプログラマーとしての生産性を高めてくれます

現場に入った時にコードをスラスラ書くためにも、スラスラ読み解くためにも、ぜひ問題をこなして基礎力を磨いていってください

## Q1. 以下の配列から、期待された結果の配列を作成してください

```
[1, 2, 3, 4, 5]
```

期待する配列

```
[1, 3, 5, 7, 9]
```

## Q2. 以下の配列から、期待された結果の配列を作成してください

```
["田中", "佐藤", "佐々木", "高橋"]
```

期待する配列

```
["田中", "佐藤", "佐々木", "高橋", "斎藤"]
```

## Q3. 以下の文字列の配列を数字だけの配列に変換してください

```
["1", "2", "3", "4", "5"]
```

期待する配列

```
[1, 2, 3, 4, 5]
```

## Q4. 以下の二つの配列を合体させた新しい配列を作成してください

```
["dog", "cat", "fish"]
["bird", "bat", "tiger"]
```

## Q5. 以下の配列の中に3がいくつあるか数えるコードを書いてください

```
[1, 5, 8, 10, 2, 3, 2, 3, 3, 1, 4, 5, 9]
```

## Q6. 配列が空であればtrue、1つ以上の要素があればfalseを返すコードを書いてください

例

```
[]
-> true

[1, 5, 8, 10]
-> false
```

## Q7. 配列であればtrue、配列でなければfalseを返すコードを書いてください

例

```
[]
-> true

{}
-> false
```

## Q8. mapとは異なるメソッドを使って以下と全く同じ処理を実現させてください

```
numbers = ["6", "5", "3", "7", "1"]
p numbers.map {|item| item.to_i }
-> [6, 5, 3, 7, 1]
```

## Q9. 以下の配列を用いて、期待通りの出力結果になるようにコードを書いてください

```
["田中", "佐藤", "佐々木", "高橋"]
```

期待結果

```
会員No.1 田中さん
会員No.2 佐藤さん
会員No.3 佐々木さん
会員No.4 高橋さん
```

## Q10.  以下の配列の最後に山下を追加してください

```
["田中", "佐藤", "佐々木", "高橋"]
```

## Q11 以下の配列から重複する部分だけを抽出した新しい配列を作成してください

```
favorite_sport = ["フットサル", "バスケット"]
selected_sport = ["野球", "ボルダリング", "サッカー", "フットサル"]
```

Q12 以下の配列を用いた繰り返し処理において、「うに」が含まれていれば「好物です」と表示し、そうでなければ「まぁまぁ好きです」と表示するようにコードを書いてください

```
["いか", "たこ", "うに", "しゃけ", "うにぎり", "うに軍艦", "うに丼"]
```

## Q13. 以下の配列から奇数だけを選んだ新しい配列を作成してください

```
[1, 2, 3, 4, 5]
```

## Q14. 以下の配列からnilの要素を削除してください

```
["サッカー", "フットサル", nil, "野球", "バスケ", nil, "バレー"]
```

## Q15. 以下の配列からadminの数を数えてください

```
["admin", "user", "user", "admin", "admin"]
```

## Q16. 以下の配列をもとに期待する出力結果になるようにコードを書いてください

```
["サッカー", "バスケ", "野球", ["フットサル", "野球"], "水泳", "ハンドボール", ["卓球", "サッカー", "ボルダリング"]]
```

期待結果

```
ユーザーの趣味一覧
No1 サッカー
No2 バスケ
No3 野球
No4 フットサル
No5 水泳
No6 ハンドボール
No7 卓球
No8 ボルダリング
```

## Q17. 以下のハッシュから name の値を取り出してください

```
{name: "satou", age: 33}
```

## Q18. 以下のハッシュから name の値を取り出して下さい

```
{user: {name: "satou", age: 33}}
```

## Q19. 以下の既存で存在する user_data に対して、 update_data の内容を反映させ user_data の内容を書き換えて下さい

```
user_data = {name: "神里", age: 31, address: "埼玉"}
update_data = {age: 32, address: "沖縄"}
```

## Q20. 以下の全てのハッシュの name と age の値を取り出し、「私の名前は〜です年齢は〜歳です」と表示してください

```
{name: "satou", age: 22}
{name: "yamada", age: 12}
{name: "takahashi", age: 32}
{name: "nakamura", age: 41}
```

## Q21. 以下の配列から全てのキーを取り出してターミナルに出力してください

```
{name: "satou", age: 33, address: "saitama", hobby: "soccer", email: "hoge@fuga.com"}
```

## Q22. ハッシュを格納した以下の配列を使用し、期待した結果になるようにコードを書いてください

```
users = [
{name: "satou", age: 33, address: "saitama", hobby: "soccer", email: "hoge@fuga.com"},
{},
{name: "yamada", age: 22, address: "tokyo", hobby: "soccer", email: "hoge@fuga.com"},
{},
{name: "suzuki", age: 44, address: "yamaguchi", hobby: "baseball", email: "hoge@fuga.com"}
]
```

期待結果

```
ハッシュにデータがある場合：No〜 名前〜、年齢〜、趣味〜、メール〜
ハッシュがからの場合：データなし
```

## Q23. 以下のハッシュをキー、バリュー含め全て配列に変換してください

```
{name: "satou", age: 33, address: "saitama", hobby: "soccer", email: "hoge@fuga.com"}
```

変換後の配列

```
[:name, "satou", :age, 33, :address, "saitama", :hobby, "soccer", :email, "hoge@fuga.com"]
```

## Q24. 以下のハッシュにおいて `age` というキーが含まれている場合は `OK` 、含まれていない場合は `NG` が表示されるようにしてください

```
{ name: "saitou", hobby: "soccer", age: 33, role: "admin" }
{ name: "yamada", hobby: "baseball", role: "normal" }
```

## Q25.  配列 `keys` の各要素を、ハッシュ `user` がキーとして保持するかどうかを判定するコードを書いてください

```
keys = [:age, :name, :hobby, :address]
user = { name: "saitou", hobby: "soccer", age: 33, role: "admin" }
```

例（意図が伝われば文章は自由に変えていただいて大丈夫です）

```
userにはageというキーがあります
userにはaddressというキーがありません
```

## Q26. 以下の２つのハッシュを合体させた新しいハッシュを作成してください

```
{C: "printf", COBOL: "DISPLAY", Go: "fmt.Print", Java: "System.out.println"}
{JavaScript: "console.log", R: "print", Ruby: "puts"}
```

## Q27. 名前、年齢、性別、管理者権限の情報を持ったユーザークラスを定義してインスタンスを作成してください管理者権限の有無はtrueかfalseで表してください

## Q28.作成した Userクラス からインスタンスを生成、 infoメソッド を実行し、目標の出力になるようにコードを書き足してください
＊ user2 の name age gender に関してはご自分の情報で大丈夫です

```
class User

~~~~~

end

user1 = User.new(name: "神里", age: 32, gender: "男", admin: true)
user2 = User.new(name: "あじー", age: 32, gender: "男", admin: false)

user1.info
puts "-----------"
user2.info
```

出力結果

```
名前：神里
年齢：32
性別：男
管理者権限：有り
-----------
名前：あじー
年齢：32
性別：男
管理者権限：無し
```

## Q29.次のようなコードを書いて、目標の出力になるようなUserクラスを定義してください
(名前情報は各自変えて大丈夫です！)
ただし、今回は attr_accessor attr_reader attr_writer は使用しないでください

```
user = User.new(name: "あじー")

puts user.name

user.name = "tanakin"

puts user.name
```

出力結果

```
あじー
tanakin
```

## Q30. 以下のようなコードを書いて、期待した出力になるようなUserクラスを定義してください

```
user = User.new(name: "あじー", age: 32)

puts user.introduce

user2 = User.new(name: "ゆたぼん", age: 10)

puts user2.introduce
```

期待する出力結果

```
こんにちは、あじーと申します宜しくお願いいたします
はいさいまいど〜、ゆたぼんです！！！
```

## Q31. 以下のようなコードを書くとエラーが出たので期待する出力結果となるように修正してください

```
class Item
  def initialize(name)
    @name = name
  end
end

book = Item.new("ゼロ秒思考")

puts book.name
```

期待する出力結果

```
ゼロ秒思考
```

## Q32.次の仕様を満たすコードを書いてください

- 名前、年齢の情報を持った「ユーザークラス」を定義してください
- 名前、入場料金の情報を持った「動物園クラス」を定義してください
- 入場料金は、幼児(0~5歳)、子供(6~12歳)、成人(13~64歳)、シニア(65~120歳)の4パターン設定してください(金額はお任せします)
- 動物園クラスに、ユーザークラスから生成されたインスタンスを受け取って、受けとったユーザーの年齢に応じて、入場料金を返す「check_entry_feeメソッド」を定義してください(年齢として無効な値が渡った場合は「無効な値です」と返してください)

## Q33.  次の指定のキー name, age, address, tell が、Hash値のキーとして過不足無く含まれているかを判定するコードを書いてください

-例

```
{name: "あじー", age: 32, address: "札幌", tell: "090-000-000"}
このhashに対して実行する場合は true が返る
{name: "あじー", age: 32, address: "札幌"}
この場合は指定のキー tell が少ないので false が返る
```


## Q34.次のコードが成り立つようにコードを書き加えてください

```
programming_language = ["ruby", "php", "python", "javascript"]

p programming_language
p upper_case_programming_language
```

出力結果

```
["Ruby", "Php", "Python", "Javascript"]
["RUBY", "PHP", "PYTHON", "JAVASCRIPT"]
```

## Q35 2つのデータベースからユーザーネーム・学習項目・合計学習時間のデータを取得したら以下のようになりました

```
[["田中", "JavaScript"], 30]
```

上記の配列を以下のようなハッシュに変換してください

```
{"user_name" => "田中", "learning_contents" => "JavaScript", "learning_time" => 30}
```

## Q36 2つのデータベースからユーザーネーム・学習項目・合計学習時間のデータを取得したら以下のようになりました

```
{["田中", "JavaScript"]=>30}
```

上記のハッシュを以下のようなハッシュに変換してください

```
{"user_name" => "田中", "learning_contents" => "JavaScript", "learning_time" => 30}
```

## Q37 2つのデータベースからユーザーネーム・学習項目・合計学習時間のデータを取得したら以下のようになりました

```
{["田中", "HTML"]=>30, ["斎藤", "JavaScript"]=>50}
```

上記のハッシュを以下のようなハッシュの配列に変換してください

```
[{"user_name" => "田中", "learning_contents" => "HTML", "learning_time" => 30}, {"user_name" => "斎藤", "learning_contents" => "JavaScript", "learning_time" => 50}]
```

## Q38.gitの問題です。本来、手元で作業するときは masterからブランチを切って作業する のですが、誤って、  masterブランチのまま作業してしまった 時の対処方をお答えください。

## Q39. あなたは中学３年生の子どもから，「根号（ルート）を簡単にする問題が出されたけど，合っているかどうか教えて！」と聞かれました。
```
√432 = 12√3
√29 = √29
√225 = 15
```
のような問題です。
そこで，ターミナルから数値を入力すれば解答が出力されるプログラムを作って，その子に使わせることに決めました。
### ・ターミナルから自然数（1以上の整数）を入力すると，次のように出力されるプログラムを作成して下さい。
```
簡単にしたいルートの中身を入力して下さい: 432
√432 = 12√3
簡単にしたいルートの中身を入力して下さい: 29
√29 = √29    ※ 1√29 ではダメ
簡単にしたいルートの中身を入力して下さい: 225
√225 = 15    ※ 15√1 ではダメ
```
【補足】
・ルートの記号は全角記号「√」を使用して下さい
・Primeクラスの`prime_division`メソッドを使用してOKです。
・例えば，432の素因数分解
```
432 = 2 * 2 * 2 * 2 * 3 * 3 * 3 = (2 * 2) * (2 * 2) * (3 * 3) * 3
より，√432 = 2 * 2 * 3 √3 = 12√3 
```

## Q40.ある居酒屋に、お会計を自動で計算してくれる、 お会計プログラム があります。この お会計プログラム は以下のような配列を受け取り、お会計を出力します。

```ruby
drinks = [
            {name: 'ビール', price: 500, count: 13},
            {name: 'ハイボール', price: 380, count: 20},
            {name: 'レモンサワー', price: 420, count: 400},
            {name: '泡盛', price: 650, count: 8},
            {name: 'テキーラ', price: 400, count: 40}
          ]

#出力結果

ビール(13):6500円
ハイボール(20):7600円
レモンサワー(400):168000円
泡盛(8):5200円
テキーラ(40):16000円
お会計203300円
```
しかし、プログラムにバグが発生し、 泡盛の count が 8のはずが、 nil が入ってしまいました。
```ruby
drinks = [
            {name: 'ビール', price: 500, count: 13},
            {name: 'ハイボール', price: 380, count: 20},
            {name: 'レモンサワー', price: 420, count: 400},
            {name: '泡盛', price: 650, count: nil},
            {name: 'テキーラ', price: 400, count: 40}
          ]
```
以上をふまえ以下の問題に答えてください。
1.  お会計プログラム を 作って下さい。
2.  count: nil はお店側の落ち度なので count: 0 で お会計プログラム内で 処理して下さい。

#Q41. ある日買い物に行ったところ，子どもがレジに興味を持ち「レジを作って」と言われました。
レジ自体を作るのはさすがに無理だと思ったあなたは，代わりにRubyでレジ機能を作ってみることにしました。
●まずは次の機能をもつプログラムを作成して下さい。
※３回に分けて出題予定です。
1. コンソールからアルファベット小文字１文字と数字をp3, r13のような入力形式で受けとる。
2. 形式に合わない入力を行った場合は，次のように再度入力を促す。
```
(例)
商品名と購入数を入力してください: ee3
不正な入力形式です。
商品名と購入数を入力してください: A4
不正な入力形式です。
商品名と購入数を入力してください:
```
3. 形式が正しければ，次のように表示して終了する。
```
(例)
商品名と購入数を入力してください: y32
商品名の略語: y, 個数: 32
```
4. 入力形式が正しいかどうかは正規表現を用いて判定することとする。
```
# (参考)
pattern =    # 変数 pattern に条件に合う正規表現を定義
loop do
  print "商品名と購入数を入力してください: "
  # 条件に合うプログラムを記述
end
```

#Q42. [レジ機能 その2]
Q41の続きになります。今回は次の機能を持つRegisterクラスを作成して下さい。
1. プログラムの形式は次の形とする。
```
class Register
  # 条件に合うプログラムを記述
end

# 商品データ
items = [
  {abbreviation: "p", name: "パン", price: 100},
  {abbreviation: "y", name: "ヨーグルト", price: 80},
  {abbreviation: "g", name: "牛乳", price: 200},
  {abbreviation: "r", name: "ラーメン", price: 150},
  {abbreviation: "m", name: "麦茶", price: 120},
  {abbreviation: "k", name: "唐揚げ", price: 250}
]

# 商品データitemsの入ったレジを作成
register = Register.new(items)
# レジに入力
register.input
# レジからレシートを出力（今回は簡易バージョン）
register.output
```
2. コンソールから商品名の略語(abbreviation)と購入数をp3, r13のような入力形式で受けとる。
3. 入力形式に誤りがある場合は，不正な入力形式です。と表示し，再度入力を促す。
（今回は「abbreviation に登場する文字」＋「数字」を正しい入力形式とします）
```
商品名と購入数を入力してください: ee3
不正な入力形式です。
商品名と購入数を入力してください: e3
不正な入力形式です。
商品名と購入数を入力してください:
```
4. 入力形式が正しければ，次のように商品名，個数，代金を表示する。
```
商品名と購入数を入力してください: y32
ヨーグルト 32個 2560円
```


# Q43. [レジ機能 その3]
Q41, Q42の続きになります。次のように出力されるようにQ42のRegisterクラスを修正して下さい。
```
商品名と購入数を入力してください: rr3
不正な入力形式です。
商品名と購入数を入力してください: r3
追加で入力できます（qでレシート出力）: y12
追加で入力できます（qでレシート出力）: k1z
不正な入力形式です。
追加で入力できます（qでレシート出力）: k1
追加で入力できます（qでレシート出力）: p5
追加で入力できます（qでレシート出力）: q
==========================
ラーメン 3個 450円
ヨーグルト 12個 960円
唐揚げ 1個 250円
パン 5個 500円
--------------------------
合計金額は 2160 円です。
```
【補足】
1. 前回と違い，複数種類の商品を購入できるようにして下さい。
（簡単のため，同じ種類の商品購入をOKとし，出力も別々でOKとします）
2. １度正しい入力形式を受け取った後は，文言を変化させて下さい。
3. １度正しい入力形式を受け取った後に「q」を入力することで，入力を終了させ，レシートが出力されるようにして下さい。
（例えば，最初に「q」を入力した場合は無効な入力形式として下さい）

#Q44  以下のクラスだとgreetメソッドを実行した際にエラーが出てしまいます
こちらをエラーが出ないように修正して下さい
```ruby
class User
  def initialize(name)
    name = name
  end

  def introduce
    <<~EOS

    はじめまして

    私の名前は#{name}です

    EOS
  end
end

tanaka = User.new("田中")

puts tanaka.introduce
```

#Q45 以下のコードのリファクタリングを行なってください
```ruby
class User
  def initialize(name, age)
    @name = name
    @age = age
  end

  def introduce_over_20
    <<~EOS

    はじめまして

    私の名前は#{@name}です

    EOS
  end

  def introduce_under_20
    <<~EOS

    僕のなまえは#{@name}だよ、よろしくね！

    EOS
  end

end

tanaka = User.new("田中", 30)

puts tanaka.introduce_over_20

yasuda = User.new("安田", 10)

puts yasuda.introduce_under_20
```

# 46 以下の出力になるようコードを書き換えてください！
```ruby
word = "gyakuten"

puts word

#=> GYAKUTEN
```

# Q 47 以下のコードにおいて、build_usersメソッドの引数が配列、単一の文字列どちらでも対応できるように修正してください
```
class User
  attr_accessor :name

  def initialize(**params)
    @name = params[:name]
  end
end

def build_users(attributes)
  @users = attributes.map { |attr| User.new(name: "#{attr}") }

  @users
end


names = ["佐藤", "山田", "田中"]

p build_users(names)

name = "斎藤"

p build_users(name)
```


## Q48.以下の条件を満たす、郵便番号変換プログラムを作成してください。
```
## 条件
### 出力
- 7桁の半角数字で出力すること
- 郵便番号のフォーマット以外が入力されるとエラーメッセージが返ること
### 入力
- 全角、半角の両方を許容すること
- 3桁目と4桁目の区切り文字は「スペース」と「ー」だけを許容すること(全角半角問わず)
## 実行例
１３００００１
１３０ー０００１
130 0001
#=>130001
13000011
13-00001
130=0001
#=>正しい郵便番号を入力してください
```

## Q49.次の変数を使用し、指定の出力になるようなコードを書いてください。
```
word = "アラサー,未経験,プログラマーに転職可能！！"
~~~~~
#=> アラサーでも未経験でもプログラマーに転職可能！！
```

## Q50. 3つの1次元配列 messages_1, messages_2, messages_3 があります。ただし，この内の1つが実際には存在しない（空配列[]ではなくnil となっている）可能性があるとします。このとき，これらをつなげた1次元配列messagesを作成するコードを書いて下さい。

## Q51. 1次元配列messagesの要素の個数を出力するコードを作成して下さい。ただし，messagesは実際には存在しない（nil となっている）可能性があるとします。この場合は0を出力することとします。

## Q52. ドラクエ風ゲームプログラムで，モンスターをランダムで出現させたいと考えました。今回はとりあえず次の５種類とします。
```
monsters = %w(スライム ドラキー ゴースト キメラ メタルスライム)
```
ただし，全てのモンスターを同じ確率で抽選するのではなく，各モンスターの出現率を設定し，それを反映して抽選したいと考えました。
そこで，次のような配列を準備しました。
```
pop_rates = [10, 8, 7, 6, 1]
```
例えば，スライムなら`10 / (10 + 8 + 7 + 6 + 1)`の確率で出現させることにします。
以上の条件で，モンスターを抽選するプログラムを書いて下さい！ 

